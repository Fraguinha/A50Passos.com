<%- include("../partials/_header.ejs") %>

<main>
  <div class="container">
    <% let i = 0 %>
    <div class="album py-5 bg-light">
      <% data.forEach((house) => { %>
      <% if (i % 3==0 ) { %>
      <% i++ %>
      <div class="row">
        <%- include("../partials/_card.ejs", { house }) %>
        <% } else if (i % 3 == 1 ) { %>
        <% i++ %>
        <%- include("../partials/_card.ejs", { house }) %>
        <% } else if (i % 3 == 2 ) { %>
        <% i++ %>
        <%- include("../partials/_card.ejs", { house }) %>
      </div>
      <% } %>
      <% }) %>
    </div>
  </div>
  <% if (pages > 1) { %>
  <% current = Number(current) %>
  <% pagination = Number(pagination) %>
  <div class="container">
    <ul class="pagination justify-content-center text-center">
      <% if (current == 0) { %>
      <li class="page-item disabled"><a class="page-link">Inicio</a></li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="<%= url %>/0">Inicio</a>
      </li>
      <% } %>
      <% let j = (current > 2 ? current - 1 : 1) %>
      <% let revindex = pages - current %>
      <% if (revindex < 3 && j - 3 + revindex > 0) j = j - 3 + revindex %>
      <% if (j > 1) { %>
      <li class="page-item disabled"><a class="page-link">...</a></li>
      <% } %>
      <% let counter = 0 %>
      <% for (; (j <= (current + 3) || counter < pagination) && j <= pages; j++) { %>
      <% if (j - 1 == current) { %>
      <li class="page-item active">
        <a class="page-link text-white"><%= j %></a>
      </li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="<%= url %>/<%= j - 1 %>"><%= j %></a>
      </li>
      <% } %>
      <% counter += 1 %>
      <% } %>
      <% if (j <= pages) { %>
      <li class="page-item disabled"><a class="page-link">...</a></li>
      <% } %>
      <% if (current == pages - 1) { %>
      <li class="page-item disabled"><a class="page-link">Fim</a></li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="<%= url %>/<%= pages - 1 %>">Fim</a>
      </li>
      <% } %>
    </ul>
  </div>
  <% } %>
</main>

<%- include("../partials/_footer.ejs") %>
